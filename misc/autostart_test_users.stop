#!/bin/bash

[ "$(id -u)" -ne 0 ] && echo Must run as root, try sudo $0 && exit 1

users=$*
if [ -z "$users" -o "$users" == 'loginwindow' ] ; then
    users=$( ps -axf | awk '/loginwindow$/{print $1}' )
fi
if [ -z "$users" ]; then
    echo "No users found running loginwindow. Try specifying them on the command-line."
fi
echo Users: $users
for i in $( ps -axf | awk '/loginwindow$/{print $2}' ) ; do
  kill -9 $i
done

for i in $users ; do
    killall -9 -u $i
done

